language: crystal
dist: xenial
sudo: true
addons:
  apt:
    packages:
      - openjdk-8-jdk
      - openjdk-8-jre
services:
  - elasticsearch
before_script:
  - sleep 10
  - crystal ./script/runner.cr es:index:create_all
script:
  - ./bin/ameba
  - crystal spec

notifications:
  on_failure: never
  on_success: never
